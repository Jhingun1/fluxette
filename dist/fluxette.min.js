!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports.fluxette=e():t.fluxette=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),i=r(o),u=n(4),a=r(u),f=n(3),s=r(f),l=n(1);e.Fluxette=i.default,e.Store=a.default,e.Mapware=s.default,e.default=function(t){var e,n=new i.default(t);return{dispatch:n.dispatch.bind(n),hydrate:function(t){return l.fluxDispatch(n,t)},state:function(){return n.state},history:function(){return n.history},proxy:(e=n.middleware).push.bind(e),unproxy:function(t){l.deleteFrom(n.middleware,t)},hook:(e=n.hooks).push.bind(e),unhook:function(t){l.deleteFrom(n.hooks,t)},connect:n.connect.bind(n)}}},function(t,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){var r;(r=t.history).push.apply(r,n(e)),l(t.vector,e),t.state=u(t.stores),c(t.hooks,e,t.state)};e.fluxDispatch=r;var o=function(t){if(t instanceof Function)return[t];var e=[];return i(t,e),e};e.vectorize=o;var i=function g(t,e){for(var n in t){var r=t[n];r instanceof Function?e.push(r):g(r,e)}},u=function(t){return t instanceof Function?t():a(t)};e.derive=u;var a=function m(t){var e=t instanceof Array?[]:{};for(var n in t){var r=t[n];e[n]=r instanceof Function?r():m(r)}return e},f=function(t){if(t.length>0){var e=[];return s(t,e),e}return t};e.normalize=f;var s=function b(t,e){for(var n=0;n<t.length;n++){var r=t[n];r instanceof Array?b(r,e):r instanceof Object&&r.type&&e.push(r)}},l=function(t,e){for(var n=0;n<e.length;n++)for(var r=e[n],o=0;o<t.length;o++)t[o](r)};e.atomicDispatch=l;var c=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];for(var o=0;o<t.length;o++)t[o].apply(t,n)};e.callAll=c;var v=function(t,e){var n=t.indexOf(e);~n&&t.splice(n,1)};e.deleteFrom=v;var p=function(t,e){for(var n=0;n<e.length;n++)t=e[n](t);return t};e.waterfall=p;var d=function(t){return"string"==typeof t||t instanceof String};e.isString=d;var h="undefined"!=typeof Symbol?Symbol():"@@fluxetteListener";e.listenerKey=h;var y="undefined"!=typeof Symbol?Symbol():"@@fluxetteWillUnmount";e.willUnmountKey=y},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,u=n;a=s=f=void 0,r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var f=a.get;return void 0===f?void 0:f.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return void 0;t=s,e=i,n=u,r=!0}},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=n(1),s=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,t),this.stores=e,this.vector=f.vectorize(e),this.hooks=[],this.history=[],this.middleware=[],this.state=f.derive(this.stores)}return a(t,[{key:"dispatch",value:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];e=f.normalize(e),e.length>0&&(e=f.waterfall(e,this.middleware),f.fluxDispatch(this,e))}},{key:"connect",value:function(){var t=arguments.length<=0||void 0===arguments[0]?function(t){return t}:arguments[0],e=arguments.length<=1||void 0===arguments[1]?"flux":arguments[1];f.isString(t)&&(e=t,t=function(t){return t});var n=this.hooks,s=this.state;return function(l){return function(l){function c(){var o=this;i(this,c);for(var a=arguments.length,l=Array(a),v=0;a>v;v++)l[v]=arguments[v];u(Object.getPrototypeOf(c.prototype),"constructor",this).apply(this,l);var p=t(s);this.state=r({},e,p);var d=this[f.listenerKey]=function(n,i){var a=t(i);p!==a&&(p=a,u(Object.getPrototypeOf(c.prototype),"setState",o).call(o,r({},e,a)))};n.push(d),this[f.willUnmountKey]=u(Object.getPrototypeOf(c.prototype),"componentWillUnmount",this)||function(){}}return o(c,l),a(c,[{key:"componentWillUnmount",value:function(){this[f.willUnmountKey].apply(this,arguments),f.deleteFrom(n,this[f.listenerKey])}}]),c}(l)}}}]),t}();e.default=s,t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return function(e){if(void 0!==e){e instanceof Array||(e=[e]);for(var n=0;n<e.length;n++){var r=e[n],o=t[r.type];if(o){var i=o(r);void 0!==i&&(e[n]=i)}}}return e}},t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return function(n){if(void 0!==n){n instanceof Array||(n=[n]);for(var r=0;r<n.length;r++){var o=n[r],i=e[o.type];if(i){var u=i(t,o);void 0!==u&&(t=u)}}}return t}},t.exports=e.default}])});